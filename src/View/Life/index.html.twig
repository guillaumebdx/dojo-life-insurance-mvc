{% extends 'layout.html.twig' %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-6 bg-secondary text-white">
                <h1 class="display-4">Simulateur</h1>
                <p class="lead">Ce simulateur permet d'indiquer la fiscalité lors d'un retrait total sur une assurance vie</p>
                <hr class="my-4">
                <p>Remplir le formulaire, le résultat s'affichera en dessous !</p>
                <form action="" method="post">
                    <div class="form-group">
                        <label for="amount">Montant à l'ouverture</label>
                        <input name="amount" type="number" class="form-control" id="amount" placeholder="Entrer le montant versé à l'ouverture de l'assurance vie">
                    </div>
                    <div class="form-group">
                        <label for="amount">Montant au moment du retrait</label>
                        <input name="amount" type="number" class="form-control" id="amount" placeholder="Entrer le montant actuel de l'assurance vie">
                    </div>
                    <div class="form-group">
                        <label for="duration">Date d'ouverture</label>
                        <input name="open-date" type="date" class="form-control" id="duration">
                    </div>
                    <button class="btn btn-primary btn-lg">Simuler !</button>
                </form>
            </div>
            <div class="col-6">
                Durée de détention : 7 ans.
                <canvas id="graph"></canvas>
                <canvas id="graph2"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha256-t9UJPrESBeG2ojKTIcFLPGF7nHi2vEc7f5A2KpH/UBU=" crossorigin="anonymous"></script>

    <script>
        data = {
            datasets: [{
                data: [7000, 3000],
                backgroundColor: [
                    'rgba(255, 205, 86)',
                    'rgba(255, 99, 132)'],
                hoverBackgroundColor: [
                    'rgba(255, 205, 86, 0.7)',
                    'rgba(255, 99, 132, 0.7)'
                ]
            }],

            // These labels appear in the legend and in the tooltips when hovering different arcs
            labels: [
                'Montant versé',
                'Intérêts'
            ]
        };
        let ctx = document.getElementById('graph');
        let myDoughnutChart = new Chart(ctx, {
            type: 'doughnut',
            data: data,

        });

        data = {
            datasets: [{
                data: [9000, 1000],
                backgroundColor: [
                    'rgba(255, 205, 86)',
                    'rgba(54, 162, 235)'],
                hoverBackgroundColor: [
                    'rgba(255, 205, 86, 0.7)',
                    'rgba(54, 162, 235, 0.7)'
                ]
            }],

            // These labels appear in the legend and in the tooltips when hovering different arcs
            labels: [
                'Montant net retiré',
                'Impôts'
            ]
        };
        let ctx2 = document.getElementById('graph2');
        let chartTax = new Chart(ctx2, {
            type: 'doughnut',
            data: data,

        });
    </script>
{% endblock %}

